# premQL

## 数据类型
    counter 持续增长，累计
    gauge   随机变化的数值
    

## 函数

#### increase
    用来针对counter 持续增长的数据，截取其中一段时间的增量
    increase(node_cpu[1m])  cpu总使用时间再1m内的增量
    示例：
    cpu总使用率，如果有多个实例，可以配合by来使用
    1 - sum(increase(node_cpu_seconds_total{mode="idle"}[1m])) / sum(increase(node_cpu_seconds_total[1m]))
    


#### rate
    搭配 counter数据来使用
    求选定范围时间内的 平均每秒的增量
    rate(xx[1m])    表示 1m时间内，平均每秒的增量


#### irate
    同样用于计算区间向量的计算率，但是其反应出的是瞬时增长率。
    通过区间向量中最后两个两本数据来计算区间向量的增长速率
    note: irate函数相比于rate函数提供了更高的灵敏度，不过当需要分析长期趋势或者在告警规则中，irate的这种灵敏度反而容易造成干扰。因此在长期趋势分析或者告警中更推荐使用rate函数。
   
    
#### by
    sum(...) by(instance)
    将 按照 instance分组之后 sum
    
    
#### without
    sum(...) without(instance)
    与by刚好相反，除去 instance 标签
    
    
#### predict_linear
    predict_linear(node_filesystem_files_free{job="node"}[2h], 4 * 3600) < 0
    基于线性回归来预测，根据两个小时内的数据预测4个小时后
    


